{
  "config_version": "3.0.0",
  "description": "Session Manager Configuration - Compatible with Advanced Session Manager & Monitor",
  "last_modified": "2024-01-15T10:30:00Z",
  "environment": "production",
  
  "valid_environments": ["development", "staging", "production"],
  "compatible_versions": {
    "session_manager": ">=2.0.0",
    "session_monitor": ">=2.0.0"
  },
  
  "session_manager_settings": {
    "base_directory": "secure_sessions",
    "max_sessions_per_user": 5,
    "max_total_sessions": 100,
    "session_lifetime_hours": 168,
    "inactive_session_cleanup_hours": 72,
    
    "session_creation": {
      "naming_pattern": "user_{user_id}_{timestamp}_{random}",
      "generate_device_info": true,
      "device_pool_size": 5,
      "geo_diversity_enabled": false
    },
    
    "auto_rotation": {
      "enabled": true,
      "rotation_strategies": ["scheduled", "error_based", "usage_based", "health_based"],
      "scheduled_rotation": {
        "strategy": "random",
        "min_interval_hours": 24,
        "max_interval_hours": 48,
        "preferred_window": ["02:00", "05:00"]
      },
      "error_based_rotation": {
        "max_errors": 3,
        "error_types": ["FloodWaitError", "AuthKeyError", "SessionRevokedError", "ConnectionError"]
      },
      "usage_based_rotation": {
        "max_requests": 1000,
        "max_duration_hours": 72
      },
      "health_based_rotation": {
        "rotate_below_score": 30,
        "check_interval_minutes": 30
      }
    },
    
    "encryption": {
      "enabled": true,
      "algorithm": "AES-256-GCM",
      "key_derivation": {
        "algorithm": "PBKDF2HMAC",
        "iterations": 100000,
        "key_length": 32
      },
      "key_rotation": {
        "master_key_days": 7,
        "session_key_hours": 24
      },
      "in_memory_encryption": true
    },
    
    "backup": {
      "enabled": true,
      "count": 10,
      "schedule": "daily",
      "retention_days": 30,
      "backup_encryption": true,
      "compression": {
        "enabled": true,
        "algorithm": "gzip",
        "level": 6
      }
    },
    
    "validation": {
      "validate_on_start": true,
      "interval_minutes": 60,
      "checks": [
        "file_existence",
        "file_size",
        "file_permissions",
        "encryption_integrity",
        "data_structure",
        "expiry_check"
      ],
      "checksum": {
        "enabled": true,
        "algorithm": "sha256"
      },
      "auto_quarantine": true,
      "alert_on_corruption": true
    },
    
    "performance": {
      "caching": {
        "enabled": true,
        "cache_size": 10,
        "cache_ttl_seconds": 300,
        "strategy": "lru",
        "preload_active_sessions": true,
        "warmup_on_start": true
      },
      "connection_pool": {
        "enabled": true,
        "size": 5,
        "max_idle_seconds": 300,
        "health_check_interval": 60
      },
      "compression": {
        "enabled": true,
        "level": 6
      },
      "resource_limits": {
        "max_concurrent_sessions": 20,
        "max_requests_per_minute": 60,
        "max_memory_mb_per_session": 50
      }
    },
    
    "rate_limiting": {
      "enabled": true,
      "strategy": "token_bucket",
      "limits": {
        "requests_per_minute": 60,
        "requests_per_hour": 1000,
        "concurrent_connections": 10,
        "burst_size": 15
      },
      "scopes": ["session", "user", "ip"]
    },
    
    "circuit_breaker": {
      "enabled": true,
      "failure_threshold": 5,
      "reset_timeout_seconds": 60,
      "half_open_max_attempts": 3
    }
  },
  
  "session_monitor_settings": {
    "monitoring": {
      "enabled": true,
      "check_interval_seconds": 300,
      "metrics_retention_days": 30,
      "alert_retention_days": 30,
      "enable_real_time_alerts": true,
      "alert_cooldown_seconds": 300,
      "max_metrics_in_memory": 10000
    },
    
    "system_thresholds": {
      "cpu": {
        "critical": 90,
        "warning": 70
      },
      "memory": {
        "critical": 90,
        "warning": 75
      },
      "disk": {
        "critical": 95,
        "warning": 85
      },
      "temperature": {
        "critical": 85,
        "warning": 70
      }
    },
    
    "session_thresholds": {
      "error_rate": {
        "critical": 0.3,
        "warning": 0.1
      },
      "health_score": {
        "critical": 30,
        "warning": 50
      },
      "response_time": {
        "critical": 10,
        "warning": 5
      },
      "session_age": {
        "inactive_days": 7,
        "old_days": 30
      }
    },
    
    "alerting": {
      "enabled": true,
      "providers": ["log", "telegram"],
      "escalation_rules": [
        {
          "level": "warning",
          "notify_after_minutes": 5,
          "channels": ["log"]
        },
        {
          "level": "critical",
          "notify_after_minutes": 1,
          "channels": ["log", "telegram"]
        }
      ]
    },
    
    "health_check": {
      "enabled": true,
      "interval_seconds": 60,
      "checks": [
        "session_health",
        "system_resources",
        "network_latency",
        "error_rates",
        "response_times"
      ]
    },
    
    "logging": {
      "level": "INFO",
      "format": "json",
      "enable_audit_log": true,
      "log_sensitive_data": false,
      "rotation": {
        "max_size_mb": 10,
        "backup_count": 5,
        "compress_old_logs": true
      }
    },
    
    "auto_remediation": {
      "enabled": false,
      "actions": [
        {
          "condition": "no_active_sessions",
          "action": "create_emergency_session",
          "require_confirmation": true
        },
        {
          "condition": "high_cpu_usage",
          "action": "increase_check_interval",
          "parameters": {
            "increase_by_seconds": 60,
            "max_interval": 600
          }
        }
      ]
    },
    
    "metrics_storage": {
      "storage_directory": "monitor_data",
      "compression_enabled": true,
      "backup_metrics": true,
      "cleanup_interval_hours": 24
    }
  },
  
  "shared_security_settings": {
    "file_permissions": {
      "session_files": 600,
      "config_files": 600,
      "backup_files": 600,
      "log_files": 640,
      "monitor_data": 700
    },
    
    "sensitive_data": {
      "mask_phone_numbers": true,
      "mask_api_keys": true,
      "hash_identifiers": true,
      "anonymize_logs": true,
      "pseudonymize_user_ids": true
    },
    
    "data_retention": {
      "session_data_days": 30,
      "log_data_days": 90,
      "backup_data_days": 30,
      "monitor_metrics_days": 30,
      "auto_purge_enabled": true,
      "secure_deletion": true
    },
    
    "access_control": {
      "require_authentication": true,
      "admin_users": [],
      "allowed_ips": [],
      "rate_limit_admin_operations": true
    }
  },
  
  "telethon_client_settings": {
    "connection": {
      "timeout": 30,
      "request_retries": 3,
      "connection_retries": 3,
      "auto_reconnect": true,
      "use_ipv6": false
    },
    
    "device_simulation": {
      "enabled": true,
      "device_pool": [
        {
          "device_model": "Samsung Galaxy S24 Ultra",
          "system_version": "Android 14",
          "app_version": "10.5.0",
          "device_type": "android"
        },
        {
          "device_model": "Google Pixel 8 Pro",
          "system_version": "Android 14",
          "app_version": "10.4.2",
          "device_type": "android"
        },
        {
          "device_model": "iPhone 15 Pro Max",
          "system_version": "iOS 17.2",
          "app_version": "10.5.1",
          "device_type": "ios"
        }
      ],
      "rotation_strategy": "sequential"
    },
    
    "proxy_settings": {
      "enabled": false,
      "proxy_list": [],
      "rotation_interval": 3600,
      "test_proxies": true
    }
  },
  
  "maintenance_settings": {
    "maintenance_window": {
      "enabled": true,
      "day": "sunday",
      "start_time": "03:00",
      "duration_hours": 2,
      "allow_emergency_operations": true
    },
    
    "auto_maintenance": {
      "cleanup_interval_hours": 24,
      "optimize_storage": true,
      "vacuum_databases": true,
      "health_check_after_maintenance": true
    },
    
    "update_management": {
      "auto_update_config": false,
      "backup_before_update": true,
      "rollback_on_failure": true,
      "notify_on_update": true
    }
  },
  
  "disaster_recovery": {
    "enabled": true,
    "backup_locations": ["local"],
    "recovery_time_objective_minutes": 15,
    "recovery_point_objective_hours": 1,
    "dr_test_interval_days": 30,
    "backup_verification": {
      "test_restore_weekly": true,
      "validate_backups_on_start": true
    }
  },
  
  "debugging_settings": {
    "debug_mode": false,
    "verbose_logging": false,
    "enable_profiling": false,
    "stack_trace_on_error": true,
    
    "diagnostics": {
      "enable_health_endpoint": true,
      "enable_metrics_endpoint": false,
      "enable_debug_endpoint": false,
      "require_authentication": true
    },
    
    "troubleshooting": {
      "auto_capture_state_on_error": true,
      "state_capture_interval_hours": 1,
      "enable_remote_debugging": false
    }
  },
  
  "environment_specific_overrides": {
    "development": {
      "session_manager_settings.encryption.enabled": false,
      "session_manager_settings.rate_limiting.enabled": false,
      "session_monitor_settings.monitoring.check_interval_seconds": 60,
      "session_monitor_settings.logging.level": "DEBUG",
      "debugging_settings.debug_mode": true
    },
    
    "staging": {
      "session_manager_settings.encryption.enabled": true,
      "session_manager_settings.backup.count": 5,
      "session_monitor_settings.alerting.providers": ["log"],
      "session_monitor_settings.auto_remediation.enabled": false
    },
    
    "production": {
      "session_manager_settings.encryption.enabled": true,
      "session_manager_settings.backup.count": 15,
      "session_monitor_settings.alerting.providers": ["log", "telegram"],
      "session_monitor_settings.auto_remediation.enabled": false,
      "debugging_settings.debug_mode": false,
      "shared_security_settings.access_control.require_authentication": true
    }
  },
  
  "feature_flags": {
    "enable_advanced_metrics": true,
    "enable_anomaly_detection": true,
    "enable_predictive_rotation": false,
    "enable_multi_tenancy": false,
    "enable_load_balancing": false,
    "enable_analytics_dashboard": true
  },
  
  "integration_settings": {
    "external_services": {
      "telegram_bot_token": "",
      "email_notifications": {
        "enabled": false,
        "smtp_server": "",
        "sender_email": "",
        "recipients": []
      },
      "webhook_endpoints": [],
      "prometheus_metrics": {
        "enabled": false,
        "port": 9090
      }
    },
    
    "api_endpoints": {
      "health_check": "/health",
      "metrics": "/metrics",
      "session_info": "/sessions",
      "admin": "/admin"
    }
  }
}
